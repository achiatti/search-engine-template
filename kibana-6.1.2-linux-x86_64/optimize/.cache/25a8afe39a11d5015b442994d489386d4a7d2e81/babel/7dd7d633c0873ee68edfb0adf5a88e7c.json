{"remainingRequest":"/home/vagrant/projects/kibana/build/kibana/node_modules/babel-loader/lib/index.js??ref--6-1!/home/vagrant/projects/kibana/build/kibana/src/core_plugins/kibana/public/doc/controllers/doc.js","dependencies":[{"path":"/home/vagrant/projects/kibana/build/kibana/src/core_plugins/kibana/public/doc/controllers/doc.js","mtime":1515552028000},{"path":"/home/vagrant/projects/kibana/build/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1493198456000},{"path":"/home/vagrant/projects/kibana/build/kibana/node_modules/babel-loader/lib/index.js","mtime":1503096278000}],"contextDependencies":[],"result":["'use strict';\n\nrequire('ui/notify');\n\nrequire('ui/courier');\n\nrequire('ui/doc_viewer');\n\nrequire('ui/index_patterns');\n\nvar _index = require('plugins/kibana/doc/index.html');\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _routes = require('ui/routes');\n\nvar _routes2 = _interopRequireDefault(_routes);\n\nvar _modules = require('ui/modules');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar app = _modules.uiModules.get('apps/doc', ['kibana/notify', 'kibana/courier', 'kibana/index_patterns']);\n\nvar resolveIndexPattern = {\n  indexPattern: function indexPattern(courier, savedSearches, $route) {\n    return courier.indexPatterns.get($route.current.params.indexPattern);\n  }\n};\n\n_routes2.default.when('/doc/:indexPattern/:index/:type/:id', {\n  template: _index2.default,\n  resolve: resolveIndexPattern\n}).when('/doc/:indexPattern/:index/:type', {\n  template: _index2.default,\n  resolve: resolveIndexPattern\n});\n\napp.controller('doc', function ($scope, $route, es, timefilter) {\n\n  timefilter.enabled = false;\n\n  // Pretty much only need this for formatting, not actually using it for fetching anything.\n  $scope.indexPattern = $route.current.locals.indexPattern;\n\n  var computedFields = $scope.indexPattern.getComputedFields();\n\n  es.search({\n    index: $route.current.params.index,\n    body: {\n      query: {\n        ids: {\n          type: $route.current.params.type,\n          values: [$route.current.params.id]\n        }\n      },\n      stored_fields: computedFields.storedFields,\n      _source: true,\n      script_fields: computedFields.scriptFields,\n      docvalue_fields: computedFields.docvalueFields\n    }\n  }).then(function (resp) {\n    if (resp.hits) {\n      if (resp.hits.total < 1) {\n        $scope.status = 'notFound';\n      } else {\n        $scope.status = 'found';\n        $scope.hit = resp.hits.hits[0];\n      }\n    }\n  }).catch(function (err) {\n    if (err.status === 404) {\n      $scope.status = 'notFound';\n    } else {\n      $scope.status = 'error';\n      $scope.resp = err;\n    }\n  });\n});",null]}