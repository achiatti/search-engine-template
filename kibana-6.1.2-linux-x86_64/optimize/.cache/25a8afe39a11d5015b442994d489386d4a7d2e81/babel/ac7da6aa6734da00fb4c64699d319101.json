{"remainingRequest":"/home/vagrant/projects/kibana/build/kibana/node_modules/babel-loader/lib/index.js??ref--6-1!/home/vagrant/projects/kibana/build/kibana/src/ui/public/share/lib/url_shortener.js","dependencies":[{"path":"/home/vagrant/projects/kibana/build/kibana/src/ui/public/share/lib/url_shortener.js","mtime":1515552038000},{"path":"/home/vagrant/projects/kibana/build/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1493198456000},{"path":"/home/vagrant/projects/kibana/build/kibana/node_modules/babel-loader/lib/index.js","mtime":1503096278000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UrlShortenerProvider = UrlShortenerProvider;\n\nvar _chrome = require('ui/chrome');\n\nvar _chrome2 = _interopRequireDefault(_chrome);\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction UrlShortenerProvider(Notifier, $http) {\n  var notify = new Notifier({\n    location: 'Url Shortener'\n  });\n\n  function shortenUrl(absoluteUrl) {\n    var basePath = _chrome2.default.getBasePath();\n\n    var parsedUrl = _url2.default.parse(absoluteUrl);\n    var path = parsedUrl.path.replace(basePath, '');\n    var hash = parsedUrl.hash ? parsedUrl.hash : '';\n    var relativeUrl = path + hash;\n\n    var formData = { url: relativeUrl };\n\n    return $http.post(basePath + '/shorten', formData).then(function (result) {\n      return _url2.default.format({\n        protocol: parsedUrl.protocol,\n        host: parsedUrl.host,\n        pathname: basePath + '/goto/' + result.data\n      });\n    }).catch(function (response) {\n      notify.error(response);\n    });\n  }\n\n  return {\n    shortenUrl: shortenUrl\n  };\n}",null]}