{"remainingRequest":"/home/vagrant/projects/kibana/build/kibana/node_modules/babel-loader/lib/index.js??ref--6-1!/home/vagrant/projects/kibana/build/kibana/src/core_plugins/metrics/public/kbn_vis_types/editor_controller.js","dependencies":[{"path":"/home/vagrant/projects/kibana/build/kibana/src/core_plugins/metrics/public/kbn_vis_types/editor_controller.js","mtime":1515552030000},{"path":"/home/vagrant/projects/kibana/build/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1493198456000},{"path":"/home/vagrant/projects/kibana/build/kibana/node_modules/babel-loader/lib/index.js","mtime":1503096278000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ReactEditorControllerProvider = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _fetch_fields = require('../lib/fetch_fields');\n\nvar _extract_index_patterns = require('../lib/extract_index_patterns');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AUTO_APPLY_KEY = 'metrics_autoApply';\n\nfunction ReactEditorControllerProvider(Private, localStorage, config) {\n  var fetchFields = Private(_fetch_fields.FetchFieldsProvider);\n\n  var ReactEditorController = function () {\n    function ReactEditorController(el, vis) {\n      _classCallCheck(this, ReactEditorController);\n\n      this.el = el;\n      this.vis = vis;\n      this.vis.fields = {};\n\n      var autoApply = localStorage.get(AUTO_APPLY_KEY);\n      vis.autoApply = autoApply != null ? autoApply : true;\n      vis.initialized = true;\n    }\n\n    _createClass(ReactEditorController, [{\n      key: 'render',\n      value: function render(visData) {\n        var _this = this;\n\n        this.visData = visData;\n        var indexPatterns = (0, _extract_index_patterns.extractIndexPatterns)(this.vis);\n        return new Promise(function (resolve) {\n          fetchFields(indexPatterns).then(function (fields) {\n            _this.vis.fields = _extends({}, fields, _this.vis.fields);\n            var Component = _this.vis.type.editorConfig.component;\n            (0, _reactDom.render)(_react2.default.createElement(Component, { config: config, vis: _this.vis, visData: visData, renderComplete: resolve }), _this.el);\n          });\n        });\n      }\n    }, {\n      key: 'resize',\n      value: function resize() {\n        if (this.visData) {\n          this.render(this.visData);\n        }\n      }\n    }, {\n      key: 'destroy',\n      value: function destroy() {\n        (0, _reactDom.unmountComponentAtNode)(this.el);\n      }\n    }]);\n\n    return ReactEditorController;\n  }();\n\n  return {\n    name: 'react_editor',\n    handler: ReactEditorController\n  };\n}\n\nexports.ReactEditorControllerProvider = ReactEditorControllerProvider;",null]}