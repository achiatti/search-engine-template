{"remainingRequest":"/home/vagrant/projects/kibana/build/kibana/node_modules/babel-loader/lib/index.js??ref--6-1!/home/vagrant/projects/kibana/build/kibana/src/core_plugins/metrics/public/components/data_format_picker.js","dependencies":[{"path":"/home/vagrant/projects/kibana/build/kibana/src/core_plugins/metrics/public/components/data_format_picker.js","mtime":1515552029000},{"path":"/home/vagrant/projects/kibana/build/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1493198456000},{"path":"/home/vagrant/projects/kibana/build/kibana/node_modules/babel-loader/lib/index.js","mtime":1503096278000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _reactSelect = require('react-select');\n\nvar _reactSelect2 = _interopRequireDefault(_reactSelect);\n\nvar _durations = require('./lib/durations');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar durationFormatTest = /[pnumshdwMY]+,[pnumshdwMY]+/;\n\nvar DataFormatPicker = function (_Component) {\n  _inherits(DataFormatPicker, _Component);\n\n  function DataFormatPicker(props) {\n    _classCallCheck(this, DataFormatPicker);\n\n    var _this = _possibleConstructorReturn(this, (DataFormatPicker.__proto__ || Object.getPrototypeOf(DataFormatPicker)).call(this, props));\n\n    _this.handleChange = _this.handleChange.bind(_this);\n    _this.handleCustomChange = _this.handleCustomChange.bind(_this);\n    var from = 'ms';\n    var to = 'ms';\n    var decimals = 2;\n    if (durationFormatTest.test(props.value)) {\n      var _props$value$split = props.value.split(',');\n\n      var _props$value$split2 = _slicedToArray(_props$value$split, 3);\n\n      from = _props$value$split2[0];\n      to = _props$value$split2[1];\n      decimals = _props$value$split2[2];\n    }\n    _this.state = {\n      from: from,\n      to: to,\n      decimals: decimals\n    };\n    return _this;\n  }\n\n  _createClass(DataFormatPicker, [{\n    key: 'handleCustomChange',\n    value: function handleCustomChange() {\n      this.props.onChange({ value: this.custom && this.custom.value || '' });\n    }\n  }, {\n    key: 'handleChange',\n    value: function handleChange(value) {\n      if (value.value === 'custom') {\n        this.handleCustomChange();\n      } else if (value.value === 'duration') {\n        var _state = this.state,\n            from = _state.from,\n            to = _state.to,\n            decimals = _state.decimals;\n\n        this.props.onChange({\n          value: from + ',' + to + ',' + decimals\n        });\n      } else {\n        this.props.onChange(value);\n      }\n    }\n  }, {\n    key: 'handleDurationChange',\n    value: function handleDurationChange(name) {\n      var _this2 = this;\n\n      return function (value) {\n        if (name === 'decimals') {\n          value = _this2.decimals;\n        }\n        _this2.setState(_defineProperty({}, name, value.value), function () {\n          var _state2 = _this2.state,\n              from = _state2.from,\n              to = _state2.to,\n              decimals = _state2.decimals;\n\n          _this2.props.onChange({\n            value: from + ',' + to + ',' + decimals\n          });\n        });\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      var value = this.props.value || '';\n      var defaultValue = value;\n      if (!_lodash2.default.includes(['bytes', 'number', 'percent'], value)) {\n        defaultValue = 'custom';\n      }\n      if (durationFormatTest.test(value)) {\n        defaultValue = 'duration';\n      }\n      var options = [{ label: 'Bytes', value: 'bytes' }, { label: 'Number', value: 'number' }, { label: 'Percent', value: 'percent' }, { label: 'Duration', value: 'duration' }, { label: 'Custom', value: 'custom' }];\n\n      var custom = void 0;\n      if (defaultValue === 'duration') {\n        var _value$split = value.split(','),\n            _value$split2 = _slicedToArray(_value$split, 3),\n            from = _value$split2[0],\n            to = _value$split2[1],\n            decimals = _value$split2[2];\n\n        return _react2.default.createElement(\n          'div',\n          { className: 'vis_editor__data_format_picker-container' },\n          _react2.default.createElement(\n            'div',\n            { className: 'vis_editor__label' },\n            this.props.label\n          ),\n          _react2.default.createElement(\n            'div',\n            { className: 'vis_editor__item' },\n            _react2.default.createElement(_reactSelect2.default, {\n              clearable: false,\n              value: defaultValue,\n              options: options,\n              onChange: this.handleChange\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { className: 'vis_editor__label' },\n            'From'\n          ),\n          _react2.default.createElement(\n            'div',\n            { className: 'vis_editor__item' },\n            _react2.default.createElement(_reactSelect2.default, {\n              clearable: false,\n              value: from,\n              options: _durations.durationInputOptions,\n              onChange: this.handleDurationChange('from')\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { className: 'vis_editor__label' },\n            'To'\n          ),\n          _react2.default.createElement(\n            'div',\n            { className: 'vis_editor__item' },\n            _react2.default.createElement(_reactSelect2.default, {\n              clearable: false,\n              value: to,\n              options: _durations.durationOutputOptions,\n              onChange: this.handleDurationChange('to')\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { className: 'vis_editor__label' },\n            'Decimal Places'\n          ),\n          _react2.default.createElement('input', {\n            style: { width: 60 },\n            className: 'vis_editor__input',\n            defaultValue: decimals,\n            ref: function ref(el) {\n              return _this3.decimals = el;\n            },\n            onChange: this.handleDurationChange('decimals'),\n            type: 'text'\n          })\n        );\n      }\n      if (defaultValue === 'custom') {\n        custom = _react2.default.createElement(\n          'div',\n          { className: 'vis_editor__data_format_picker-custom_row' },\n          _react2.default.createElement(\n            'div',\n            { className: 'vis_editor__label' },\n            'Format String (See ',\n            _react2.default.createElement(\n              'a',\n              { href: 'http://numeraljs.com/', target: '_BLANK' },\n              'Numeral.js'\n            ),\n            ')'\n          ),\n          _react2.default.createElement('input', {\n            style: { width: 100 },\n            className: 'vis_editor__input',\n            defaultValue: value,\n            ref: function ref(el) {\n              return _this3.custom = el;\n            },\n            onChange: this.handleCustomChange,\n            type: 'text'\n          })\n        );\n      }\n      return _react2.default.createElement(\n        'div',\n        { className: 'vis_editor__data_format_picker-container' },\n        _react2.default.createElement(\n          'div',\n          { className: 'vis_editor__label' },\n          this.props.label\n        ),\n        _react2.default.createElement(\n          'div',\n          { className: 'vis_editor__item' },\n          _react2.default.createElement(_reactSelect2.default, {\n            clearable: false,\n            value: defaultValue,\n            options: options,\n            onChange: this.handleChange\n          })\n        ),\n        custom\n      );\n    }\n  }]);\n\n  return DataFormatPicker;\n}(_react.Component);\n\nDataFormatPicker.defaultProps = {\n  label: 'Data Formatter'\n};\n\nDataFormatPicker.propTypes = {\n  value: _propTypes2.default.string,\n  label: _propTypes2.default.string,\n  onChange: _propTypes2.default.func\n};\n\nexports.default = DataFormatPicker;\nmodule.exports = exports['default'];",null]}