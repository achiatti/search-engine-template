{"remainingRequest":"/home/vagrant/projects/kibana/build/kibana/node_modules/babel-loader/lib/index.js??ref--6-1!/home/vagrant/projects/kibana/build/kibana/src/ui/public/vis/update_status.js","dependencies":[{"path":"/home/vagrant/projects/kibana/build/kibana/src/ui/public/vis/update_status.js","mtime":1515552038000},{"path":"/home/vagrant/projects/kibana/build/kibana/node_modules/cache-loader/dist/cjs.js","mtime":1493198456000},{"path":"/home/vagrant/projects/kibana/build/kibana/node_modules/babel-loader/lib/index.js","mtime":1503096278000}],"contextDependencies":[],"result":["'use strict';\n\n// adapted from https://github.com/isaacs/json-stringify-safe/blob/02cfafd45f06d076ac4bf0dd28be6738a07a72f9/stringify.js\nfunction serializer() {\n  var stack = [];\n  var keys = [];\n\n  var cycleReplacer = function cycleReplacer(key, value) {\n    if (stack[0] === value) return '[Circular ~]';\n    return '[Circular ~.' + keys.slice(0, stack.indexOf(value)).join('.') + ']';\n  };\n\n  return function (key, value) {\n    if (stack.length > 0) {\n      var thisPos = stack.indexOf(this);\n      ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\n      ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\n      if (~stack.indexOf(value)) value = cycleReplacer.call(this, key, value);\n    } else stack.push(value);\n\n    return value;\n  };\n}\n\nvar getUpdateStatus = function getUpdateStatus($scope) {\n\n  if (!$scope._oldStatus) {\n    $scope._oldStatus = {};\n  }\n\n  var hasChangedUsingGenericHashComparison = function hasChangedUsingGenericHashComparison(name, value) {\n    var currentValue = JSON.stringify(value, serializer());\n    if (currentValue !== $scope._oldStatus[name]) {\n      $scope._oldStatus[name] = currentValue;\n      return true;\n    }\n    return false;\n  };\n\n  function hasSizeChanged(currentWidth, currentHeight) {\n\n    if (!$scope._oldStatus.resize) {\n      $scope._oldStatus.resize = { width: currentWidth, height: currentHeight };\n      return true;\n    }\n\n    if (currentWidth !== $scope._oldStatus.resize.width || currentHeight !== $scope._oldStatus.resize.height) {\n      $scope._oldStatus.resize = { width: currentWidth, height: currentHeight };\n      return true;\n    }\n    return false;\n  }\n\n  return {\n    aggs: hasChangedUsingGenericHashComparison('aggs', $scope.vis.aggs),\n    data: hasChangedUsingGenericHashComparison('data', $scope.visData),\n    params: hasChangedUsingGenericHashComparison('param', $scope.vis.params),\n    resize: hasSizeChanged($scope.vis.size),\n    uiState: hasChangedUsingGenericHashComparison('uiState', $scope.uiState)\n  };\n};\n\nmodule.exports = { getUpdateStatus: getUpdateStatus };",null]}